{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Rehman/Downloads/Ma%20Bags/src/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, type Db } from \"mongodb\"\n\nconst uri = process.env.MONGODB_URI || \"\"\nconst options = {}\n\nlet client: MongoClient | null = null\nlet clientPromise: Promise<MongoClient> | null = null\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var _mongoClientPromise: Promise<MongoClient> | undefined\n}\n\nfunction getClientPromise(): Promise<MongoClient> {\n  if (!uri || !uri.startsWith(\"mongodb\")) {\n    throw new Error(\n      \"Please add your MongoDB URI to .env.local. Get your connection string from MongoDB Atlas (https://cloud.mongodb.com)\"\n    )\n  }\n\n  if (process.env.NODE_ENV === \"development\") {\n    // In development mode, use a global variable to preserve the connection\n    if (!global._mongoClientPromise) {\n      client = new MongoClient(uri, options)\n      global._mongoClientPromise = client.connect()\n    }\n    return global._mongoClientPromise\n  } else {\n    // In production, create a new client for each request\n    if (!clientPromise) {\n      client = new MongoClient(uri, options)\n      clientPromise = client.connect()\n    }\n    return clientPromise\n  }\n}\n\nexport async function getDatabase(): Promise<Db> {\n  const client = await getClientPromise()\n  return client.db(\"mabags\")\n}\n\nexport default getClientPromise\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW,IAAI;AACvC,MAAM,UAAU,CAAC;AAEjB,IAAI,SAA6B;AACjC,IAAI,gBAA6C;AAOjD,SAAS;IACP,IAAI,CAAC,OAAO,CAAC,IAAI,UAAU,CAAC,YAAY;QACtC,MAAM,IAAI,MACR;IAEJ;IAEA,wCAA4C;QAC1C,wEAAwE;QACxE,IAAI,CAAC,OAAO,mBAAmB,EAAE;YAC/B,SAAS,IAAI,sHAAW,CAAC,KAAK;YAC9B,OAAO,mBAAmB,GAAG,OAAO,OAAO;QAC7C;QACA,OAAO,OAAO,mBAAmB;IACnC;;AAQF;AAEO,eAAe;IACpB,MAAM,SAAS,MAAM;IACrB,OAAO,OAAO,EAAE,CAAC;AACnB;uCAEe"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Rehman/Downloads/Ma%20Bags/app/api/articles/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\r\nimport { getDatabase } from \"@/lib/mongodb\"\r\nimport type { Article, PaginatedResponse, ApiResponse } from \"@/lib/types\"\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const searchParams = request.nextUrl.searchParams\r\n    const search = searchParams.get(\"search\")\r\n    const tag = searchParams.get(\"tag\")\r\n    const page = Number.parseInt(searchParams.get(\"page\") || \"1\", 10)\r\n    const limit = Number.parseInt(searchParams.get(\"limit\") || \"10\", 10)\r\n\r\n    const db = await getDatabase()\r\n    const articlesCollection = db.collection<Article>(\"articles\")\r\n\r\n    // Build filter query\r\n    const filter: any = {}\r\n\r\n    if (search) {\r\n      filter.$or = [\r\n        { title: { $regex: search, $options: \"i\" } },\r\n        { excerpt: { $regex: search, $options: \"i\" } },\r\n        { content: { $regex: search, $options: \"i\" } },\r\n      ]\r\n    }\r\n\r\n    if (tag) {\r\n      filter.tags = tag\r\n    }\r\n\r\n    // Get total count\r\n    const total = await articlesCollection.countDocuments(filter)\r\n\r\n    // Get paginated results\r\n    const skip = (page - 1) * limit\r\n    const items = await articlesCollection\r\n      .find(filter)\r\n      .sort({ createdAt: -1 })\r\n      .skip(skip)\r\n      .limit(limit)\r\n      .toArray()\r\n\r\n    // Convert ObjectId to string\r\n    const articles = items.map((item) => ({\r\n      ...item,\r\n      _id: item._id?.toString(),\r\n    }))\r\n\r\n    const totalPages = Math.ceil(total / limit)\r\n    const hasMore = page < totalPages\r\n\r\n    const response: PaginatedResponse<Article> = {\r\n      items: articles,\r\n      total,\r\n      page,\r\n      totalPages,\r\n      hasMore,\r\n    }\r\n\r\n    return NextResponse.json<ApiResponse<PaginatedResponse<Article>>>({\r\n      success: true,\r\n      data: response,\r\n    })\r\n  } catch (error) {\r\n    console.error(\"Error fetching articles:\", error)\r\n    return NextResponse.json<ApiResponse>(\r\n      {\r\n        success: false,\r\n        error: \"Failed to fetch articles\",\r\n      },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,SAAS,aAAa,GAAG,CAAC;QAChC,MAAM,MAAM,aAAa,GAAG,CAAC;QAC7B,MAAM,OAAO,OAAO,QAAQ,CAAC,aAAa,GAAG,CAAC,WAAW,KAAK;QAC9D,MAAM,QAAQ,OAAO,QAAQ,CAAC,aAAa,GAAG,CAAC,YAAY,MAAM;QAEjE,MAAM,KAAK,MAAM,IAAA,sIAAW;QAC5B,MAAM,qBAAqB,GAAG,UAAU,CAAU;QAElD,qBAAqB;QACrB,MAAM,SAAc,CAAC;QAErB,IAAI,QAAQ;YACV,OAAO,GAAG,GAAG;gBACX;oBAAE,OAAO;wBAAE,QAAQ;wBAAQ,UAAU;oBAAI;gBAAE;gBAC3C;oBAAE,SAAS;wBAAE,QAAQ;wBAAQ,UAAU;oBAAI;gBAAE;gBAC7C;oBAAE,SAAS;wBAAE,QAAQ;wBAAQ,UAAU;oBAAI;gBAAE;aAC9C;QACH;QAEA,IAAI,KAAK;YACP,OAAO,IAAI,GAAG;QAChB;QAEA,kBAAkB;QAClB,MAAM,QAAQ,MAAM,mBAAmB,cAAc,CAAC;QAEtD,wBAAwB;QACxB,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI;QAC1B,MAAM,QAAQ,MAAM,mBACjB,IAAI,CAAC,QACL,IAAI,CAAC;YAAE,WAAW,CAAC;QAAE,GACrB,IAAI,CAAC,MACL,KAAK,CAAC,OACN,OAAO;QAEV,6BAA6B;QAC7B,MAAM,WAAW,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;gBACpC,GAAG,IAAI;gBACP,KAAK,KAAK,GAAG,EAAE;YACjB,CAAC;QAED,MAAM,aAAa,KAAK,IAAI,CAAC,QAAQ;QACrC,MAAM,UAAU,OAAO;QAEvB,MAAM,WAAuC;YAC3C,OAAO;YACP;YACA;YACA;YACA;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAA0C;YAChE,SAAS;YACT,MAAM;QACR;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;QACT,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}